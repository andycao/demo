<!DOCTYPE html>
<html>

<head>
    <title>first example</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="bower_components/bootstrap/dist/css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="bower_components/bootstrap-datepicker/dist/css/bootstrap-datepicker.css">

    <script src="bower_components/jquery/dist/jquery.js"></script>
    <script src="bower_components/bootstrap/dist/js/bootstrap.js"></script>
    <script src="bower_components/bootstrap-datepicker/dist/js/bootstrap-datepicker.js"></script>
    <script src="bower_components/avalon/avalon.js"></script>

</head>

<body ms-controller="myform">
    <div class="container">
        <h2>新建任务</h2>
        <p>任务显示</p>
        <hr>
        任务类型：
        <select ms-duplex="type">
            <option value="1">公益</option>
            <option value="2">固收</option>
        </select>
        <hr>

        <p><input id="haha" ms-duplex="startDate"></p>
        <p>人物名称:  <input ms-duplex="name" /></p>
        <p ms-visible="toggle">test</p>
        <button class="btn" ms-class="{{toggle? 'btn-success':'btn-danger'}}" ms-click='myclick'>点我</button>
        <button class="btn" ms-click='anotherClick(name)'>toggle show</button>
        <p>{{'aaaes>' | testFilter}}</p>

        <hr>
        <ul>
            <li ms-repeat="condition">
                <button>删除</button>
                <select ms-duplex="el.type" ms-on-change="saveCondition">
                    <option value="1">固收</option>
                    <option value="2">基金</option>
                </select>
                <span ms-visible="el.type === 1">
                    <label class="radio-inline">
                      <input type="radio" name="inlineRadioOptions" value="option1"> 固收1
                  </label>
                  <label class="radio-inline">
                      <input type="radio" name="inlineRadioOptions" value="option2"> 固收2
                  </label>
                  <label class="radio-inline">
                      <input type="radio" name="inlineRadioOptions" value="option3"> 固收3
                  </label>
              </span>
              <span ms-visible="el.type === 2">
                <label class="radio-inline">
                    <input type="radio" name="inlineRadioOptions" value="option1"> 基金1
                </label>
                <label class="radio-inline">
                  <input type="radio" name="inlineRadioOptions" value="option2"> 基金2
              </label>
              <label class="radio-inline">
                  <input type="radio" name="inlineRadioOptions" value="option3"> 基金3
              </label>
          </span>
      </li>
  </ul>
</div>
</div>
<script>
    var vm = avalon.define({
        $id: "myform",
        name: "",
        second: 123312,
        toggle: true,
        type: 1,
        //代码中使用filter
        startDate: avalon.filters.date(new Date(), 'yyyy-MM-dd'),
        condition: [{
            type : 1,
            value : 1
        },{
            type : 2,
            value : 2
        },{
            type : 1,
            value : 3
        }],
        myclick : function(){
            vm.toggle = !vm.toggle;
        },
        anotherClick : function(param){
            console.log(param);
            console.log(vm.startDate);
            console.log(vm.condition);
        },
        saveCondition : function(){
            console.log(vm.condition);
        }
    });

        //自定义filter
        var filters = avalon.filters = {
            uppercase: function(str) {
                return str.toUpperCase();
            },
            testFilter: function(str){
                return 'hello filter';
            }
        };

        var a = $("#haha").datepicker({
            format: 'yyyy-mm-dd',
            autoclose: true
        });

console.log(vm.condition);
    </script>
</body>

</html>
